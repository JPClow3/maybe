{% load money_filters %}
{# Account detail content (loaded via HTMX) #}
<div class="content-fade-in">
<div class="mb-6">
    <a href="{% url 'account_list' %}" class="text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 mb-4 inline-block" hx-boost="true" hx-target="#main-content" hx-select="#main-content" hx-swap="innerHTML">← Back to Accounts</a>
    <div class="flex justify-between items-center">
        <div id="account-name-display">
            <h1 class="text-3xl font-bold bg-gradient-to-r from-primary-600 via-primary-500 to-primary-400 dark:from-primary-400 dark:via-primary-300 dark:to-primary-200 bg-clip-text text-transparent">
                <span id="account-name" 
                      hx-get="{% url 'account_edit_inline' account.pk %}" 
                      hx-target="#account-name-display" 
                      hx-swap="outerHTML"
                      class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"
                      role="button"
                      tabindex="0"
                      aria-label="Click to edit account name">
                    {{ account.name }}
                </span>
            </h1>
            <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">{{ account.get_accountable_type_display }}</p>
        </div>
        <div class="flex items-center gap-4">
            <div class="text-right">
                <p class="text-sm text-gray-500 dark:text-gray-400">Current Balance</p>
                <p class="text-3xl font-bold tabular-nums tracking-tight font-mono text-gray-900 dark:text-gray-100">{{ account.balance|real_br }}</p>
            </div>
            <a href="{% url 'account_edit' account.pk %}" class="btn-primary">
                Edit Account
            </a>
        </div>
    </div>
</div>

<section class="card mb-6" aria-labelledby="account-details-heading">
    <h2 id="account-details-heading" class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4">Account Details</h2>
    <dl class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
            <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Status</dt>
            <dd class="mt-1 text-sm text-gray-900 dark:text-gray-100">{{ account.get_status_display }}</dd>
        </div>
        <div>
            <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Currency</dt>
            <dd class="mt-1 text-sm text-gray-900 dark:text-gray-100">{{ account.currency }}</dd>
        </div>
        <div>
            <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Classification</dt>
            <dd class="mt-1 text-sm text-gray-900 dark:text-gray-100 capitalize">{{ account.classification }}</dd>
        </div>
        <div>
            <dt class="text-sm font-medium text-gray-500 dark:text-gray-400">Created</dt>
            <dd class="mt-1 text-sm text-gray-900 dark:text-gray-100">{{ account.created_at|date:"M d, Y" }}</dd>
        </div>
    </dl>
</section>

<section class="card overflow-hidden" aria-labelledby="recent-transactions-heading">
    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-800">
        <h2 id="recent-transactions-heading" class="text-lg font-semibold text-gray-900 dark:text-gray-100">Recent Transactions</h2>
    </div>
    {% if transactions %}
    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
        <thead class="bg-gray-50 dark:bg-gray-800">
            <tr>
                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Date</th>
                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Name</th>
                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Amount</th>
                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Category</th>
            </tr>
        </thead>
        <tbody class="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
            {% for transaction in transactions %}
            <tr class="hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors">
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100">
                    {{ transaction.date|date:"d/m/Y" }}
                </td>
                <td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-100">
                    <a href="{% url 'transaction_detail' transaction.pk %}" class="text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium">
                        {{ transaction.name }}
                    </a>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm {% if transaction.amount < 0 %}text-emerald-600 dark:text-emerald-400{% else %}text-zinc-900 dark:text-zinc-100{% endif %} tabular-nums tracking-tight font-mono">
                    {{ transaction.amount|real_br }}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                    {{ transaction.category.name|default:"—" }}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="px-6 py-12 text-center">
        <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
        </svg>
        <h3 class="mt-2 text-sm font-semibold text-gray-900 dark:text-gray-100">No transactions yet</h3>
        <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">This account doesn't have any transactions. Add your first transaction to get started.</p>
        <div class="mt-6">
            <a href="{% url 'transaction_new' %}" class="btn-primary">
                Add Transaction
            </a>
        </div>
    </div>
    {% endif %}
</section>
</div>

