{% load static %}
{# Sidebar Navigation - Desktop Only (hidden on mobile, uses bottom nav instead) #}
<aside class="hidden md:flex w-64 h-screen fixed left-0 top-0 flex-col justify-between py-6 z-20" aria-label="Main navigation">
    {# Glass sidebar styling matching Luma spec #}
    <div class="w-full h-full bg-[rgba(10,10,10,0.6)] backdrop-blur-[20px] border-r border-white/5 flex flex-col justify-between">
        <div class="px-4">
            {# Brand Logo: The Hexagonal Prism #}
            <div class="flex items-center gap-3 px-3 mb-10 group cursor-pointer">
                <div class="relative w-8 h-8 flex items-center justify-center">
                    <img src="{% static 'images/Logo.png' %}" 
                         alt="Luma Logo" 
                         class="w-full h-full drop-shadow-[0_0_10px_rgba(99,102,241,0.5)] transition-transform group-hover:scale-110 duration-300" />
                </div>
                <span class="font-bold text-xl tracking-tight text-white group-hover:text-indigo-200 transition-colors">Luma</span>
            </div>

            {# Navigation #}
            <nav class="space-y-1">
                {% url 'dashboard' as dashboard_url %}
                <a href="{{ dashboard_url }}" 
                   class="nav-item flex items-center gap-3 px-4 py-2.5 rounded-r-xl text-sm font-medium transition-all {% if request.resolver_match.url_name == 'dashboard' or request.resolver_match.url_name == 'dashboard_stats' %}active bg-white/5 text-white{% else %}text-gray-400 hover:text-white hover:bg-white/5{% endif %}"
                   hx-boost="true"
                   hx-target="#main-content"
                   hx-select="#main-content"
                   hx-swap="innerHTML">
                    <svg class="w-4 h-4 {% if request.resolver_match.url_name == 'dashboard' or request.resolver_match.url_name == 'dashboard_stats' %}text-indigo-500{% endif %}" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                    </svg>
                    Dashboard
                </a>

                {% url 'account_list' as account_list_url %}
                <a href="{{ account_list_url }}" 
                   class="nav-item flex items-center gap-3 px-4 py-2.5 rounded-r-xl text-sm font-medium transition-all {% if request.resolver_match.url_name == 'account_list' or request.resolver_match.url_name == 'account_detail' or request.resolver_match.url_name == 'account_new' or request.resolver_match.url_name == 'account_edit' %}active bg-white/5 text-white{% else %}text-gray-400 hover:text-white hover:bg-white/5{% endif %}"
                   hx-boost="true"
                   hx-target="#main-content"
                   hx-select="#main-content"
                   hx-swap="innerHTML">
                    <svg class="w-4 h-4 {% if request.resolver_match.url_name == 'account_list' or request.resolver_match.url_name == 'account_detail' or request.resolver_match.url_name == 'account_new' or request.resolver_match.url_name == 'account_edit' %}text-indigo-500{% endif %}" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M21 12a2.25 2.25 0 00-2.25-2.25H15a3 3 0 11-6 0H5.25A2.25 2.25 0 003 12m18 0v6a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 9m18 0V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v3" />
                    </svg>
                    Accounts
                </a>

                {% url 'transaction_list' as transaction_list_url %}
                <a href="{{ transaction_list_url }}" 
                   class="nav-item flex items-center gap-3 px-4 py-2.5 rounded-r-xl text-sm font-medium transition-all text-gray-400 hover:text-white hover:bg-white/5"
                   hx-boost="true"
                   hx-target="#main-content"
                   hx-select="#main-content"
                   hx-swap="innerHTML">
                    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 21L3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5" />
                    </svg>
                    Transactions
                </a>

                {% url 'security_list' as security_list_url %}
                <a href="{{ security_list_url }}" 
                   class="nav-item flex items-center gap-3 px-4 py-2.5 rounded-r-xl text-sm font-medium transition-all text-gray-400 hover:text-white hover:bg-white/5"
                   hx-boost="true"
                   hx-target="#main-content"
                   hx-select="#main-content"
                   hx-swap="innerHTML">
                    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941" />
                    </svg>
                    Investments
                </a>

                <a href="#" 
                   class="nav-item flex items-center gap-3 px-4 py-2.5 rounded-r-xl text-sm font-medium transition-all text-gray-400 hover:text-white hover:bg-white/5 mt-6 group">
                    <svg class="w-4 h-4 text-fuchsia-500 group-hover:animate-pulse" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z" />
                    </svg>
                    <span class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-fuchsia-400 font-semibold">Ask Luma</span>
                </a>
            </nav>
        </div>

        {# User Profile Section #}
        <div class="px-4">
            <div class="p-3 rounded-xl bg-white/5 border border-white/5 flex items-center gap-3 hover:bg-white/10 transition-colors cursor-pointer">
                <div class="w-8 h-8 rounded-full bg-gradient-to-tr from-indigo-500 to-cyan-500 p-[1px]">
                    <div class="w-full h-full rounded-full bg-black flex items-center justify-center text-xs font-bold text-white">
                        {% if user.first_name or user.last_name %}
                            {{ user.first_name|first|default:"" }}{{ user.last_name|first|default:"" }}
                        {% else %}
                            {{ user.email|first|upper }}
                        {% endif %}
                    </div>
                </div>
                <div class="overflow-hidden">
                    <p class="text-xs font-medium text-white truncate">
                        {% if user.first_name or user.last_name %}
                            {{ user.first_name }} {{ user.last_name }}
                        {% else %}
                            {{ user.email|truncatechars:20 }}
                        {% endif %}
                    </p>
                    <p class="text-[10px] text-gray-500 uppercase tracking-wider">Member</p>
                </div>
            </div>
        </div>
    </div>
</aside>

{# Active nav item indicator styling #}
<style>
    .nav-item.active {
        border-left: 2px solid #6366f1;
    }
    
    .nav-item {
        position: relative;
    }
</style>

