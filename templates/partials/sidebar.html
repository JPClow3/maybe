{% load static %}
{# Sidebar Navigation - Desktop Only (hidden on mobile, uses bottom nav instead) #}
<aside class="luma-sidebar w-64 h-full bg-[#0a0a0a]/60 backdrop-blur-[20px] border-r border-white/5 hidden md:flex flex-col justify-between py-6 z-20" aria-label="Main navigation">
    <div class="px-0">
        {# Brand Logo: The Hexagonal Prism #}
        <div class="flex items-center gap-3 px-6 mb-10 group cursor-pointer">
            <div class="relative w-8 h-8 flex items-center justify-center">
                <svg viewBox="0 0 100 100" class="w-full h-full drop-shadow-[0_0_10px_rgba(99,102,241,0.5)] transition-transform group-hover:scale-110 duration-300">
                    <defs>
                        <linearGradient id="prismGradSidebar" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#6366f1" />
                            <stop offset="100%" stop-color="#06b6d4" />
                        </linearGradient>
                    </defs>
                    <path d="M50 5 L93.3 25 V75 L50 95 L6.7 75 V25 Z" fill="none" stroke="url(#prismGradSidebar)" stroke-width="6" />
                    <path d="M50 5 L50 50 L93.3 25" fill="none" stroke="url(#prismGradSidebar)" stroke-width="2" stroke-opacity="0.5" />
                </svg>
            </div>
            <span class="font-bold text-xl tracking-tight text-white group-hover:text-luma-indigo transition-colors">Luma</span>
        </div>

        {# Navigation #}
        <nav class="space-y-1 pr-4">
            {% url 'dashboard' as dashboard_url %}
            <a href="{{ dashboard_url }}" 
               class="flex items-center gap-3 px-4 py-2.5 rounded-r-xl text-sm font-medium transition-all {% if request.resolver_match.url_name == 'dashboard' or request.resolver_match.url_name == 'dashboard_stats' %}bg-white/5 text-white border-l-2 border-luma-indigo{% else %}text-gray-400 hover:text-white hover:bg-white/5{% endif %}"
               hx-boost="true"
               hx-target="#main-content"
               hx-select="#main-content"
               hx-swap="innerHTML">
                <i data-lucide="layout-grid" class="w-4 h-4 {% if request.resolver_match.url_name == 'dashboard' or request.resolver_match.url_name == 'dashboard_stats' %}text-luma-indigo{% endif %}"></i> 
                Dashboard
            </a>

            {% url 'account_list' as account_list_url %}
            <a href="{{ account_list_url }}" 
               class="flex items-center gap-3 px-4 py-2.5 rounded-r-xl text-sm font-medium transition-all {% if request.resolver_match.url_name == 'account_list' or request.resolver_match.url_name == 'account_detail' or request.resolver_match.url_name == 'account_new' or request.resolver_match.url_name == 'account_edit' %}bg-white/5 text-white border-l-2 border-luma-indigo{% else %}text-gray-400 hover:text-white hover:bg-white/5{% endif %}"
               hx-boost="true"
               hx-target="#main-content"
               hx-select="#main-content"
               hx-swap="innerHTML">
                <i data-lucide="wallet" class="w-4 h-4 {% if request.resolver_match.url_name == 'account_list' or request.resolver_match.url_name == 'account_detail' or request.resolver_match.url_name == 'account_new' or request.resolver_match.url_name == 'account_edit' %}text-luma-indigo{% endif %}"></i> 
                Accounts
            </a>

            {% url 'transaction_list' as transaction_list_url %}
            <a href="{{ transaction_list_url }}" 
               class="flex items-center gap-3 px-4 py-2.5 rounded-r-xl text-sm font-medium transition-all {% if 'transactions' in request.path %}bg-white/5 text-white border-l-2 border-luma-indigo{% else %}text-gray-400 hover:text-white hover:bg-white/5{% endif %}"
               hx-boost="true"
               hx-target="#main-content"
               hx-select="#main-content"
               hx-swap="innerHTML">
                <i data-lucide="arrow-left-right" class="w-4 h-4"></i> 
                Transactions
            </a>

            {% url 'security_list' as security_list_url %}
            <a href="{{ security_list_url }}" 
               class="flex items-center gap-3 px-4 py-2.5 rounded-r-xl text-sm font-medium transition-all {% if 'investments' in request.path or 'securities' in request.path %}bg-white/5 text-white border-l-2 border-luma-indigo{% else %}text-gray-400 hover:text-white hover:bg-white/5{% endif %}"
               hx-boost="true"
               hx-target="#main-content"
               hx-select="#main-content"
               hx-swap="innerHTML">
                <i data-lucide="trending-up" class="w-4 h-4"></i> 
                Investments
            </a>

            <a href="#" 
               class="flex items-center gap-3 px-4 py-2.5 rounded-r-xl text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 transition-all mt-6 group">
                <i data-lucide="sparkles" class="w-4 h-4 text-luma-fuchsia group-hover:animate-pulse"></i>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-luma-indigo to-luma-fuchsia font-semibold">Ask Luma</span>
            </a>
        </nav>
    </div>

    {# User Profile Section #}
    <div class="px-4">
        <div class="p-3 rounded-xl bg-white/5 border border-white/5 flex items-center gap-3 hover:bg-white/10 transition-colors cursor-pointer">
            <div class="w-8 h-8 rounded-full bg-gradient-to-tr from-luma-indigo to-luma-cyan p-[1px]">
                <div class="w-full h-full rounded-full bg-black flex items-center justify-center text-xs font-bold text-white">
                    {{ user.username|slice:":2"|upper }}
                </div>
            </div>
            <div class="overflow-hidden">
                <p class="text-xs font-medium text-white truncate">{{ user.username }}</p>
                <p class="text-[10px] text-gray-500 uppercase tracking-wider">Pro Member</p>
            </div>
        </div>
    </div>
</aside>

