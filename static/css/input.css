@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom design tokens */
@layer base {
  :root {
    --color-primary: #3b82f6;
    --color-primary-dark: #2563eb;
    --color-secondary: #6b7280;
    --color-success: #22c55e;
    --color-danger: #ef4444;
    --color-text-primary: #111827;
    --color-text-secondary: #6b7280;
    --color-bg-container: #ffffff;
    --color-bg-surface: #f9fafb;
    --color-border: #e5e7eb;
  }
}

/* Custom component styles */
@layer components {
  .btn-primary {
    @apply bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-primary-600;
  }
  
  .btn-secondary {
    @apply bg-secondary-200 text-secondary-900 px-4 py-2 rounded-md hover:bg-secondary-300 focus:outline-none focus:ring-2 focus:ring-secondary-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-secondary-200;
  }
  
  .btn-danger {
    @apply bg-danger-600 text-white px-4 py-2 rounded-md hover:bg-danger-700 focus:outline-none focus:ring-2 focus:ring-danger-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-danger-600;
  }
  
  .form-input {
    @apply mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 transition-colors;
  }

  .form-select {
    @apply mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 transition-colors;
  }

  .form-textarea {
    @apply mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 transition-colors;
  }

  /* Form validation states - using direct CSS to avoid circular dependency */
  .form-input.border-success-500,
  .form-select.border-success-500,
  .form-textarea.border-success-500 {
    border-color: theme('colors.success.500');
    --tw-ring-color: theme('colors.success.500');
  }

  .form-input.border-danger-500,
  .form-select.border-danger-500,
  .form-textarea.border-danger-500 {
    border-color: theme('colors.danger.500');
    --tw-ring-color: theme('colors.danger.500');
  }
  
  .card {
    @apply bg-white shadow rounded-lg p-6;
  }
  
  .text-primary {
    @apply text-primary-600;
  }
  
  .text-success {
    @apply text-success-600;
  }
  
  .text-danger {
    @apply text-danger-600;
  }
  
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }
  
  .focus\:not-sr-only:focus {
    position: static;
    width: auto;
    height: auto;
    padding: inherit;
    margin: inherit;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }
  
  /* Ensure all interactive elements have visible focus */
  a:focus,
  button:focus,
  input:focus,
  select:focus,
  textarea:focus {
    outline: 2px solid theme('colors.primary.500');
    outline-offset: 2px;
  }
  
  /* Tabular numbers for monetary values - proper alignment */
  .font-tabular-nums {
    font-variant-numeric: tabular-nums;
  }
}

/* Utility classes */
@layer utilities {
  /* Shadow refinements */
  .shadow-soft {
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.05), 0 1px 2px 0 rgba(0, 0, 0, 0.04);
  }
}

/* HTMX Indicator styles */
@layer components {
  /* Hide indicator by default */
  .htmx-indicator {
    opacity: 0;
    transition: opacity 200ms ease-in;
  }

  /* Show indicator when HTMX is requesting (parent or self) */
  .htmx-request .htmx-indicator,
  .htmx-request.htmx-indicator {
    opacity: 1;
  }

  /* HTMX swapping animation for delete/fade-out */
  .htmx-swapping {
    opacity: 0;
    transition: opacity 0.5s ease-out;
  }

  /* Disable buttons and inputs during HTMX requests */
  .htmx-request button[type="submit"],
  form.htmx-request button[type="submit"],
  .htmx-request button.htmx-indicator-button {
    pointer-events: none;
    opacity: 0.6;
  }

  /* Disable form inputs during submission (for inline edits) */
  form.htmx-request input:not([type="hidden"]),
  form.htmx-request select,
  form.htmx-request textarea {
    pointer-events: none;
    opacity: 0.7;
    cursor: not-allowed;
  }

  /* Page loading bar animation */
  #page-loading-bar {
    transform-origin: left;
    transition: transform 0.2s ease-out;
    box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3);
  }

  /* Page loading overlay transitions */
  #page-loading-overlay {
    transition: opacity 0.3s ease-in-out;
  }

  /* Skeleton shimmer animation */
  @keyframes skeleton-shimmer {
    0% {
      background-position: -1000px 0;
    }
    100% {
      background-position: 1000px 0;
    }
  }

  .skeleton-shimmer {
    background: linear-gradient(
      90deg,
      #f3f4f6 0%,
      #e5e7eb 20%,
      #f3f4f6 40%,
      #f3f4f6 100%
    );
    background-size: 1000px 100%;
    animation: skeleton-shimmer 2s infinite;
  }

  /* Skeleton fade transitions */
  .skeleton-fade-in {
    animation: skeleton-fade-in 0.3s ease-in;
  }

  @keyframes skeleton-fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  .skeleton-fade-out {
    animation: skeleton-fade-out 0.3s ease-out;
  }

  @keyframes skeleton-fade-out {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }

  /* Content fade-in after skeleton */
  .content-fade-in {
    animation: content-fade-in 0.4s ease-in;
  }

  @keyframes content-fade-in {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

