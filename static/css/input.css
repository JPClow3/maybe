@tailwind base;
@tailwind components;
@tailwind utilities;

/* Geist Fonts - @font-face declarations */
@font-face {
  font-family: 'Geist Sans';
  src: url('../fonts/Geist-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Geist Sans';
  src: url('../fonts/Geist-Medium.woff2') format('woff2');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Geist Mono';
  src: url('../fonts/GeistMono-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

/* Custom design tokens - Dark mode preparation */
@layer base {
  :root {
    /* Primary colors */
    --color-primary: #18181b; /* Zinc 900 */
    --color-primary-hover: #27272a; /* Zinc 800 */
    
    /* Surface colors */
    --color-surface: #ffffff;
    --color-surface-subtle: #f9fafb; /* Gray 50 */
    
    /* Money semantic colors */
    --color-money-income: #059669; /* Emerald 600 */
    --color-money-expense: #18181b; /* Zinc 900 (gray instead of red) */
    --color-money-debt: #e11d48; /* Rose 600 (only for critical alerts) */
    
    /* Legacy colors (for backward compatibility) */
    --color-secondary: #6b7280;
    --color-success: #22c55e;
    --color-danger: #ef4444;
    --color-text-primary: #111827;
    --color-text-secondary: #6b7280;
    --color-bg-container: #ffffff;
    --color-bg-surface: #f9fafb;
    --color-border: #e5e7eb;
  }
  
  /* Dark mode (prepared for future implementation) */
  @media (prefers-color-scheme: dark) {
    :root {
      /* Dark mode values can be added here later */
    }
  }
}

/* Custom component styles */
@layer components {
  /* Buttons - Brazilian minimalism with micro-interactions */
  .btn-primary {
    @apply bg-primary text-white px-4 py-2 rounded-lg min-h-[44px] active:scale-95 transition-all duration-200 ease-in-out hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-primary disabled:active:scale-100;
  }
  
  .btn-secondary {
    @apply bg-secondary-200 text-secondary-900 px-4 py-2 rounded-lg min-h-[44px] active:scale-95 transition-all duration-200 ease-in-out hover:bg-secondary-300 focus:outline-none focus:ring-2 focus:ring-secondary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-secondary-200 disabled:active:scale-100;
  }
  
  .btn-danger {
    @apply bg-rose-600 text-white px-4 py-2 rounded-lg min-h-[44px] active:scale-95 transition-all duration-200 ease-in-out hover:bg-rose-700 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-rose-600 disabled:active:scale-100;
  }
  
  .btn-ghost {
    @apply bg-transparent text-gray-700 px-4 py-2 rounded-lg min-h-[44px] active:scale-95 transition-all duration-200 ease-in-out hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent disabled:active:scale-100;
  }
  
  /* Form inputs - Notion/Mac OS style */
  .form-input {
    @apply mt-1 block w-full rounded-lg border-gray-200 bg-white px-3 py-2 text-sm shadow-sm min-h-[44px] transition-all duration-200 ease-in-out focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none;
  }
  
  .form-input[type="number"],
  .form-input.input-numeric {
    @apply tabular-nums;
  }

  .form-select {
    @apply mt-1 block w-full rounded-lg border-gray-200 bg-white px-3 py-2 text-sm shadow-sm min-h-[44px] transition-all duration-200 ease-in-out focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none;
  }

  .form-textarea {
    @apply mt-1 block w-full rounded-lg border-gray-200 bg-white px-3 py-2 text-sm shadow-sm transition-all duration-200 ease-in-out focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none;
  }

  /* Form validation states - using direct CSS to avoid circular dependency */
  .form-input.border-success-500,
  .form-select.border-success-500,
  .form-textarea.border-success-500 {
    border-color: theme('colors.success.500');
    --tw-ring-color: theme('colors.success.500');
  }

  .form-input.border-danger-500,
  .form-select.border-danger-500,
  .form-textarea.border-danger-500 {
    border-color: theme('colors.danger.500');
    --tw-ring-color: theme('colors.danger.500');
  }
  
  /* Cards - Subtle depth with rounded-xl and enhanced hover effects */
  .card {
    @apply bg-white border border-gray-100 rounded-xl shadow-sm p-5 transition-all duration-300 ease-in-out;
  }
  
  .card:hover {
    @apply shadow-md border-gray-200;
    transform: translateY(-2px);
  }
  
  /* Card variants with colored accents */
  .card-primary {
    @apply bg-white border-l-4 border-primary-600 shadow-sm p-5 transition-all duration-300 ease-in-out;
  }
  
  .card-primary:hover {
    @apply shadow-md border-primary-700;
    transform: translateY(-2px);
  }
  
  .card-success {
    @apply bg-white border-l-4 border-emerald-500 shadow-sm p-5 transition-all duration-300 ease-in-out;
  }
  
  .card-success:hover {
    @apply shadow-md border-emerald-600;
    transform: translateY(-2px);
  }
  
  .text-primary {
    @apply text-primary-600;
  }
  
  .text-success {
    @apply text-success-600;
  }
  
  .text-danger {
    @apply text-danger-600;
  }
  
  /* Badges - Subtle style for categories and status */
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-lg text-xs font-medium;
  }
  
  .badge-income {
    @apply bg-emerald-50 text-emerald-700;
  }
  
  .badge-expense {
    @apply bg-zinc-50 text-zinc-700;
  }
  
  .badge-debt {
    @apply bg-rose-50 text-rose-700;
  }
  
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }
  
  .focus\:not-sr-only:focus {
    position: static;
    width: auto;
    height: auto;
    padding: inherit;
    margin: inherit;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }
  
  /* Ensure all interactive elements have visible focus */
  a:focus,
  button:focus,
  input:focus,
  select:focus,
  textarea:focus {
    outline: 2px solid theme('colors.primary.500');
    outline-offset: 2px;
  }
  
  /* Global micro-interactions - tactile click effect */
  button:not(:disabled),
  a:not([aria-disabled="true"]),
  [role="button"]:not([aria-disabled="true"]) {
    @apply transition-transform duration-200 ease-in-out active:scale-95;
  }
  
  /* Ensure disabled elements don't scale */
  button:disabled,
  a[aria-disabled="true"],
  [role="button"][aria-disabled="true"] {
    @apply active:scale-100;
  }
  
  /* Tabular numbers for monetary values - proper alignment */
  .font-tabular-nums {
    font-variant-numeric: tabular-nums;
  }
}

/* Utility classes */
@layer utilities {
  /* Shadow refinements */
  .shadow-soft {
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.05), 0 1px 2px 0 rgba(0, 0, 0, 0.04);
  }
}

/* HTMX Indicator styles */
@layer components {
  /* Hide indicator by default */
  .htmx-indicator {
    opacity: 0;
    transition: opacity 200ms ease-in;
  }

  /* Show indicator when HTMX is requesting (parent or self) */
  .htmx-request .htmx-indicator,
  .htmx-request.htmx-indicator {
    opacity: 1;
  }

  /* HTMX swapping animation for delete/fade-out */
  .htmx-swapping {
    opacity: 0;
    transition: opacity 0.5s ease-out;
  }

  /* Disable buttons and inputs during HTMX requests */
  .htmx-request button[type="submit"],
  form.htmx-request button[type="submit"],
  .htmx-request button.htmx-indicator-button {
    pointer-events: none;
    opacity: 0.6;
  }

  /* Disable form inputs during submission (for inline edits) */
  form.htmx-request input:not([type="hidden"]),
  form.htmx-request select,
  form.htmx-request textarea {
    pointer-events: none;
    opacity: 0.7;
    cursor: not-allowed;
  }

  /* Page loading bar animation */
  #page-loading-bar {
    transform-origin: left;
    transition: transform 0.2s ease-out;
    box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3);
  }

  /* Page loading overlay transitions */
  #page-loading-overlay {
    transition: opacity 0.3s ease-in-out;
  }

  /* Skeleton shimmer animation */
  @keyframes skeleton-shimmer {
    0% {
      background-position: -1000px 0;
    }
    100% {
      background-position: 1000px 0;
    }
  }

  .skeleton-shimmer {
    background: linear-gradient(
      90deg,
      #f3f4f6 0%,
      #e5e7eb 20%,
      #f3f4f6 40%,
      #f3f4f6 100%
    );
    background-size: 1000px 100%;
    animation: skeleton-shimmer 2s infinite;
  }

  /* Skeleton fade transitions */
  .skeleton-fade-in {
    animation: skeleton-fade-in 0.3s ease-in;
  }

  @keyframes skeleton-fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  .skeleton-fade-out {
    animation: skeleton-fade-out 0.3s ease-out;
  }

  @keyframes skeleton-fade-out {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }

  /* Content fade-in after skeleton */
  .content-fade-in {
    animation: content-fade-in 0.4s ease-in;
  }

  @keyframes content-fade-in {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* Body background gradient */
  body {
    @apply bg-gradient-to-br from-slate-50 via-gray-50 to-slate-50 min-h-screen;
  }
  
  /* Enhanced table row hover effects */
  .table-row-hover {
    @apply transition-all duration-200 ease-in-out;
  }
  
  .table-row-hover:hover {
    @apply bg-gradient-to-r from-primary-50/50 to-transparent;
    transform: scale(1.01);
  }
}

